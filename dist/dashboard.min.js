requests_check=function(a,d,b){if("-"==a)var c=!1;else var c=new Date<=new Date(a.split("/")[2],a.split("/")[1]-1,a.split("/")[0]);return!!c&&(b<=0||d<b)};var current_month=new Date().getFullYear()+"-"+(new Date().getMonth()+1<10?"0"+(new Date().getMonth()+1):new Date().getMonth()+1),payday="-",cutoff_day="-",months=$("#view_96 .kn-table tbody td.field_88 span"),paydays=$("#view_96 .kn-table tbody td.field_76 span"),cutoffs=$("#view_96 .kn-table tbody td.field_82 span");$.each(months,function(a,b){b.textContent.trim()==current_month&&(payday=paydays[a].textContent.trim()||"-",cutoff_day=cutoffs[a].textContent.trim()||"-")});var base_salary=parseFloat(""==$("#view_51 .field_44 .kn-detail-body").text().replace(/,/g,"")?0:$("#view_51 .field_44 .kn-detail-body").text().replace(/,/g,"")),requested_amount=parseFloat(""==$("#view_52 .kn-pivot-calc:eq(0)").text().replace(/,/g,"")?0:$("#view_52 .kn-pivot-calc:eq(0)").text().replace(/,/g,"")),requested_transactions=parseInt(""==$("#view_52 .kn-pivot-calc:eq(1)").text().replace(/,/g,"")?0:$("#view_52 .kn-pivot-calc:eq(1)").text().replace(/,/g,"")),max_number_requests=parseFloat(""==$("#view_68 .field_91 .kn-detail-body").text().replace(/,/g,"")?0:$("#view_68 .field_91 .kn-detail-body").text().replace(/,/g,"")),withdrawable_threshold=parseFloat(""==$("#view_68 .field_89 .kn-detail-body").text().replace(/,/g,"")?0:$("#view_68 .field_89 .kn-detail-body").text().replace(/,/g,"")),current_date=new Date,mtd=current_date.getDate()-1,tot=new Date(current_date.getFullYear(),current_date.getMonth()+1,0).getDate(),balance=base_salary*mtd/tot,available_amount=balance-requested_amount,check=requests_check(cutoff_day,requested_transactions,max_number_requests),cutoff_day_tmp=""==cutoff_day?"-":cutoff_day,condition=new Date<=new Date(cutoff_day_tmp.split("/")[2],cutoff_day_tmp.split("/")[1]-1,cutoff_day_tmp.split("/")[0]),html='<section id="custom-view-scene1"><div class="payday-wrapper"><div><div class="payday-label">Next Payday</div><div class="payday-value">'+payday+'</div><span class="cutoff-message"><i>Cut-off at '+cutoff_day+'</i></span></div><img src="https://root.ewa-services.com/ewa/images/ico-calendar.svg"/></div><div class="max-withdrawable"><div class="max-withdrawable-label">Maximum Withdrawable Amount</div><div class="max-amount-button"><span>'+(Math.round(available_amount*withdrawable_threshold*100)/100).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"</span><a"+(!0===condition?' href="'+window.location.pathname+'#request"':' style="pointer-events:none;" class="disabled"')+">Withdraw</a></div></div></section>";$(html).insertBefore($("#kn-scene_1"))